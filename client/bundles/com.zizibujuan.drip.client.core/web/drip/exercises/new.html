<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<link type="text/css" rel="stylesheet" href="/dijit/themes/claro/claro.css" />
<link type="text/css" rel="stylesheet" href="/dojo/resources/dojo.css" />
<link type="text/css" rel="stylesheet" href="/resources/main.css" />

<link type="text/css" rel="stylesheet" href="/drip/Editor.css" />
<title>新建习题 · 孜孜不倦(高等数学篇)</title>
<script type="text/javascript" 
	data-dojo-config="
		async:true,
		parseOnLoad:true,
		isDebug:true" 
	src="/dojo/dojo.js"></script>
<script type="text/javascript"
   src="/mathjax/MathJax.js?config=MML_HTMLorMML">
</script>
<script type="text/javascript">
require(["dojo/ready", 
         "dojo/store/JsonRest",
         "dijit/registry",
         "dojo/parser",
         "dijit/form/Button",
         "drip/Editor",
         "Header",
         "dojo/domReady!"],function(
        		 ready,
        		 JsonRest,
        		 registry){
	ready(function(){
		var jsonRest = new JsonRest({
			 target:"/exercises/"
		 });
		var btnNewExercise = registry.byId("btnNewExercise");
		var editor = registry.byId("editor");
		btnNewExercise.on("click",function(e){
			var content = editor.get("value");
			var data = {content:content};
			jsonRest.add(data).then(function(response){
				// 保存成功
				//		给出成功提示，然后一段时间后自动消失（使用固定的提示区域）
				//		清空习题内容
			},function(error){
				// 保存失败
				//		界面上保留习题内容
				//		给出失败提示（成功与失败使用相同的提示区域）
			});
		});
	});
	
});
</script>
</head>
<body class="claro">
	<div data-dojo-type="Header" id="header">
		<div data-dojo-type="dijit/form/Button" style="margin: 0px;" id="btnNewExercise">保存</div>
	</div>
	
	<div style="margin-top: 60px">
		<div class="wrapper">
			<div style="padding: 3px; margin-bottom: 10px; border-radius: 3px; background: #eee">
				<!-- TODO：将这些style提取到样式文件中 -->
				<div style="border: 1px solid #cacaca; background: #fbfbfb; padding-left: 10px; padding-right: 10px">
					<div style="padding-top: 5px; padding-bottom: 10px;" data-dojo-attach-point="divContent">
						<div data-dojo-type="drip/Editor" style="height:350px" id="editor" data-dojo-props=""></div>
					</div>
				</div>
			</div>
		</div>
	</div>
</body>
</html>